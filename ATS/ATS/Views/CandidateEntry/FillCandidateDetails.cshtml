
@model ATS.Models.Fill_Candidate_details
@using Microsoft.AspNetCore.Mvc
@using Microsoft.AspNetCore.Mvc.Rendering
@using Microsoft.AspNetCore.Mvc.ViewFeatures
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>1.1</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="~/css/bootstrap.min.css" rel="stylesheet">
    <script src="~/js/bootstrap.bundle.min.js"></script>
    <link href="~/css/mainStyle.css" rel="stylesheet">
    <script src="~/js/jquery.min.js"></script>

    <script src="~/js/jquery.min.js"></script>
    <script src="~/js/jquery.dataTables.min.js"></script>
    <script src="~/js/site.js"></script>
 
</head>
<body>
    <div class="container-fluid box">
        <div class="row col-md-12 header" id="header">
            <div class="col-sm-2 logospace">
                <img class="" src="~/Images/Logo.png" />
            </div>
            <div class="col-sm-10 headerBtns">
                <span class="profilePic pullright">
                    <img src="~/Images/Avatar.png" />
                </span>
                <div class="btn-group pullright loggedInBtn">
                    <button class="btn btn-secondary btn-sm dropdown-toggle loggedIn" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        John Doe
                    </button>
                    <ul class="dropdown-menu logout">
                        <a href="#">Logout</a>
                    </ul>
                </div>

                <span class="notificationIcon pullright">
                    <img src="~/Images/icon_notification.png" />
                </span>
            </div>
        </div>
        <div class="row flex-nowrap content">
            <div class="col-auto col-md-3 col-xl-2 px-0 bg-dark">
                <div class="d-flex flex-column align-items-center align-items-sm-start text-white">

                    <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle active ">
                                <img src="~/Images/icon_home.png" /><span class="ms-1 d-none d-sm-inline">Home</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle">
                                <img src="~/Images/icon_dashboard.png" /><span class="ms-1 d-none d-sm-inline">Menu 1</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link  align-middle">
                                <img src="~/Images/icon_inbox.png" /><span class="ms-1 d-none d-sm-inline">Menu 2</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link  align-middle">
                                <img src="~/Images/icon_products.png" /><span class="ms-1 d-none d-sm-inline">Menu 3</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle">
                                <img src="~/Images/icon_Invoices.png" /><span class="ms-1 d-none d-sm-inline">Menu 4</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle">
                                <img src="~/Images/icon_customers.png" /><span class="ms-1 d-none d-sm-inline">Menu 5</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle">
                                <img src="~/Images/icon_chat-room.png" /><span class="ms-1 d-none d-sm-inline">Menu 6</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle">
                                <img src="~/Images/icon_calendar.png" /><span class="ms-1 d-none d-sm-inline">Menu 7</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle">
                                <img src="~/Images/icon_help-center.png" /><span class="ms-1 d-none d-sm-inline">Menu 8</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle">
                                <img src="~/Images/icon_setting.png" /><span class="ms-1 d-none d-sm-inline">Menu 9</span>
                            </a>
                        </li>
                    </ul>
                    <hr>

                </div>
            </div>
            <div class="col fillCandidate">
                <div class="col-sm-8 content2">
                    <div class="sectionHeading">
                        <h4>Fill Candidate Details</h4>
                    </div>
                    <div class="col-sm-12 form">
                        <form>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label><span class="required">*</span> required fields</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="inputSource">Source <span class="required"> *</span></label>
                                        @Html.DropDownList("Disposition", (SelectList)ViewBag.Disposition, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="inputsubsource">Sub-source <span class="required"> *</span></label>
                                        @Html.DropDownList("SubDisposition", Enumerable.Empty<SelectListItem>(), new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="inputLocation">Location <span class="required"> *</span></label>
                                        @Html.DropDownList("Location", (SelectList)ViewBag.Location, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="inputPosition">Position Applied for <span class="required"> *</span></label>
                                        @Html.DropDownList("Position", (SelectList)ViewBag.Position, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="inputPhotographs">Photographs <span class="required"> *</span></label>
                                        <div class="input-group mb-3" style="margin-left: -10px;">
                                            <input type="file" class="form-control" id="inputPhotographs">

                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <button type="button" class="btn btn-secondary btn-previous" onclick="handlePrevImageClick()"><img src="~/Images/icon_previous.png" /><label> Previous</label></button>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">&nbsp;</div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <button type="button" class="btn btn-secondary btn-next btn-pullright" onclick="handleNextImageClick()">Next<img src="~/Images/icon_next.png" /></button>
                                    </div>
                                </div>
                            </div>


                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="~/js/jquery.min.js"></script>

    <script src="~/js/jquery.min.js"></script>
    <script src="~/js/jquery.dataTables.min.js"></script>
    <script src="~/js/site.js"></script>
    <script>

        function handleNextImageClick() {
            sessionStorage.setItem('Disposition', $('#Disposition option:selected').text());

            sessionStorage.setItem('SubDisposition', $('#SubDisposition option:selected').text());
            sessionStorage.setItem('Location', $('#Location option:selected').text());
            sessionStorage.setItem('Position', $('#Position option:selected').text());


            var Source = $('#Disposition option:selected').text();
            var Subsource = $('#SubDisposition option:selected').text();
            var location = $('#Location option:selected').text();
            var Position = $('#Position option:selected').text();


            if (!Source || !location || !Position) {
                // Show an alert if any of the values is null or empty
                alert('Please fill in all required fields.');
                return;
            }
            // Create a JavaScript object with the form values
            var formData = {
                Source: Source,
                Subsource: Subsource,
                Location: location,
                Position: Position
            };

            // Make an AJAX call
            $.ajax({
                url: '@Url.Action("FillCandidateDetailsPost", "CandidateEntry")',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(formData),
                success: function (result) {
                    // Handle the success response if needed
                    var url = '@Url.Action("PersonalDetails", "CandidateEntry")';
                    window.location.href = url;
                },
                error: function (error) {
                    // Handle the error response if needed
                    console.error(error);
                }
            });

            //var url = '@Url.Action("PersonalDetails", "CandidateEntry")';
            //window.location.href = url;
        }


        function handlePrevImageClick() {

            var url = '@Url.Action("AddCandicateEntry", "CandidateEntry")';
            window.location.href = url;
        }
        $(document).ready(function () {

            if (sessionStorage.getItem('Disposition') !== null) {
                $('#Disposition').val(sessionStorage.getItem('Disposition'));
            }

            if (sessionStorage.getItem('SubDisposition') !== null) {
                $('#SubDisposition').val(sessionStorage.getItem('SubDisposition'));
            }

            if (sessionStorage.getItem('Location') !== null) {
                $('#Location').val(sessionStorage.getItem('Location'));
            }

            if (sessionStorage.getItem('Position') !== null) {
                $('#Position').val(sessionStorage.getItem('Position'));
            }
            // Assuming you have a change event on the 'Disposition' dropdown
            $('#Disposition').change(function () {
                var selectedValue = $(this).val();


                // AJAX call to update SubDisposition dropdown
                $.ajax({
                    type: 'POST',
                    url: '/CandidateEntry/HandleDisposition',
                    data: { selectedValue: selectedValue },
                    success: function (data) {
                        console.log(data);
                        var subDispositionDropdown = $('#SubDisposition');
                        subDispositionDropdown.empty(); // Clear existing options
                        $.each(data, function (index, item) {
                            subDispositionDropdown.append($('<option>', {
                                value: item.value.toString(),
                                text: item.text
                            }));
                        });
                    },
                    error: function (error) {
                        console.error('Error:', error);
                    }
                });
            });



        });



        function uploadFile() {
            var fileInput = document.getElementById('photographInput');
            var file = fileInput.files[0];

            if (file) {
                var formData = new FormData();
                formData.append('Photograph', file);

                $.ajax({
                    url: '/CandidateEntry/CompressImage',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        console.log(data); // Handle the response from the server
                    },
                    error: function (error) {
                        console.error('Error uploading file:', error);
                    }
                });
            } else {
                console.log('No file selected.');
            }
        }



    </script>
</body>

</html>
